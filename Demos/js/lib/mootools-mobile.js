(function(){[Element,Window,Document].invoke("implement",{hasEvent:function(g){var f=this.retrieve("events"),h=(f&&f[g])?f[g].values:null;if(h){for(var e=h.length;e--;){if(e in h){return true}}}return false}});var d=function(g,h,e,f){h=g[h];e=g[e];return function(i,j){if(!j){j=f}if(e&&!this.hasEvent(j)){e.call(this,i,j)}if(h){h.call(this,i,j)}}};var b=function(g,f,h,e){return function(i,j){f[h].call(this,i,j||e);g[h].call(this,i,j||e)}};var c=Element.Events;Element.defineCustomEvent=function(e,g){var f=c[g.base];g.onAdd=d(g,"onAdd","onSetup",e);g.onRemove=d(g,"onRemove","onTeardown",e);c[e]=f?Object.append({},g,{base:f.base,condition:function(h){return(!f.condition||f.condition.call(this,h))&&(!g.condition||g.condition.call(this,h))},onAdd:b(g,f,"onAdd",e),onRemove:b(g,f,"onRemove",e)}):g;return this};var a=function(e){var f="on"+e.capitalize();Element[e+"CustomEvents"]=function(){Object.each(c,function(h,g){if(h[f]){h[f].call(h,g)}})};return a};a("enable")("disable")})();Browser.Features.Touch=(function(){try{document.createEvent("TouchEvent").initTouchEvent("touchstart");return true}catch(a){}return false})();Browser.Features.iOSTouch=(function(){var a="cantouch",c=document.html,f=false;var d=function(){c.removeEventListener(a,d,true);f=true};try{c.addEventListener(a,d,true);var e=document.createEvent("TouchEvent");e.initTouchEvent(a);c.dispatchEvent(e);return f}catch(b){}d();return false})();(function(){var a="swipe",c=a+":distance",f=a+":cancelVertical",g=50;var b={},e,d;var h=function(){d=false};var i={touchstart:function(j){if(j.touches.length>1){return}var k=j.touches[0];d=true;b={x:k.pageX,y:k.pageY}},touchmove:function(l){l.preventDefault();if(e||!d){return}var p=l.changedTouches[0];var j={x:p.pageX,y:p.pageY};if(this.retrieve(f)&&Math.abs(b.y-j.y)>Math.abs(b.x-j.x)){d=false;return}var o=this.retrieve(c,g),n=j.x-b.x,m=n<-o,k=n>o;if(!k&&!m){return}d=false;l.direction=(m?"left":"right");l.start=b;l.end=j;this.fireEvent(a,l)},touchend:h,touchcancel:h};Element.defineCustomEvent(a,{onSetup:function(){this.addEvents(i)},onTeardown:function(){this.removeEvents(i)},onEnable:function(){e=false},onDisable:function(){e=true;h()}})})();
