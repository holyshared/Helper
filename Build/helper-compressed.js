//licenses: The MIT Licence
//copyrights: Copyright (c) 2011 Noritaka Horio all rights reserved.
(function(){function a(c){if(!(Type.isFunction(c.bind)&&Type.isFunction(c.unbind))){throw new TypeError("It is an invalid helper.")}return c}var b=this.Helper=new Class({_helpers:{},addHelper:function(f){var e=this;var c=a(f);c.addEvents({enable:function(){e.fireEvent("enableHelper",[c])},disable:function(){e.fireEvent("disableHelper",[c])}}).bind(this);var d=c.getName();this._helpers[d]=c;return this},addHelpers:function(){var c=Array.from(arguments);c.each(function(d){this.addHelper(d)},this);return this},removeHelper:function(e){var c=a(e);var d=c.getName();delete this._helpers[d];return this},removeHelpers:function(){var c=Array.from(arguments);if(c.length<=0){c=this.getHelpers()}c.each(function(d){this.removeHelper(d)},this);return this},getHelper:function(c){if(!this.hasHelper(c)){throw new Error("Helper "+c+" is not found.")}return this._helpers[c]},getHelpers:function(){var c=[];var d=Array.from(arguments);if(d.length<=0){d=Object.keys(this._helpers)}d.each(function(e){c.push(this.getHelper(e))},this);return c},enableHelper:function(c){var d=this.getHelper(c);d.setEnable(true);return this},disableHelper:function(c){var d=this.getHelper(c);d.setEnable(false);return this},hasHelper:function(c){return(this._helpers[c])?true:false},isEnableHelper:function(c){var d=this.getHelper(c);return d.isEnable()},isDisableHelper:function(c){var d=this.getHelper(c);return(d.isEnable())?false:true}});b.Properties={Properties:function(e){if(!this.prototype.setOptions){return}var d=this.prototype.setOptions;var c=function(f){if(!f){return}e.each(function(g){if(f[g]){var j=g.capitalize();var i="set"+j;if(this[i]){var h=this[i];h.call(this,f[g])}delete f[g]}},this);d(f)};this.prototype.setOptions=c}};Object.append(Class.Mutators,b.Properties);b.Pluggable=new Class({Implements:[Options,Events],Properties:["name","target","enable"],_name:null,_target:null,_enable:false,_setuped:false,initialize:function(c){this.setOptions(c)},setName:function(c){if(!Type.isString(c)){throw new TypeError("Name should be a character string.")}this._name=c;return this},getName:function(){return this._name},setTarget:function(c){if(!(Type.isObject(c)||c==null)){throw new TypeError("Specified target is not an object or null.")}this._target=c;return this},getTarget:function(){return this._target},setObserver:function(c){if(!(Type.isObject(c)||Type.isElement(c))){throw new TypeError("Specified observer is an object or not element.")}this._observer=c;return this},getObserver:function(){return this._observer},setEnable:function(d){if(this.isEnable()==d){return}if(this.isSetuped()===false){this._setupHelper()}var c=(d)?"enable":"disable";this[c]();this.fireEvent(c);this._enable=d;return this},_setupHelper:function(){this.setup();this._setuped=true},isSetuped:function(){return this._setuped},bind:function(c){if(!Type.isObject(c)){throw new TypeError("It is an invalid object.")}this.setTarget(c);if(this.isSetuped()===false){this._setupHelper()}if(!this.isEnable()){this.setEnable(true)}return this},unbind:function(){this.setEnable(false);this.setTarget(null)},isEnable:function(){return(this._enable)?true:false}})}());(function(b,a){a.Delegator=new Class({Implements:[a.Pluggable],Properties:["name","target","observer","methods","enable"],_observer:null,_methods:{},initialize:function(c){this.setOptions(c)},setObserver:function(c){if(!(Type.isObject(c)||Type.isElement(c))){throw new TypeError("Specified observer is an object or not element.")}this._observer=c;return this},getObserver:function(){return this._observer},getMethod:function(c){if(!this.hasMethod(c)){throw new Error("The specification "+c+" method is not found.")}return this._methods[c]},getMethods:function(){var c=[];var d=Array.from(arguments);if(d.length<=0){d=Object.keys(this._methods)}d.each(function(e){c.push(this.getMethod(e))},this);return c},setMethods:function(c){this._methods={};this.addMethods(c)},addMethod:function(c,d){if(this.hasMethod(d)){return}this._methods[c]=d;return this},addMethods:function(c){for(var d in c){this.addMethod(d,c[d])}return this},removeMethod:function(c){if(!this.hasMethod(c)){throw new TypeError("Because method "+c+" doesn't exist, it is not possible to delete it.")}delete this._methods[c];return this},removeMethods:function(){var c=Array.from(arguments);if(c.length<=0){c=this.getMethods()}c.each(function(d){this.removeMethod(d)},this);return this},hasMethod:function(c){return(this._methods[c])?true:false},delegate:function(d,c){var f=this.getMethod(d);var e=this.getTarget();if(!Type.isFunction(e[f])){throw new Error("Method "+f+" doesn't exist or it is an invalid method.")}e[f].apply(e,c)}})}(document,Helper));(function(b,a){a.Keyboard=new Class({Extends:a.Delegator,_name:"keyboard",_handler:null,_observer:b,_onKeydown:function(c){if(!this.isEnable()){return}if(!this.hasMethod(c.key)){return}this.delegate(c.key)},_getObserver:function(){var d=this.getTarget();var c=this.getObserver();if(d.toElement){c=d.toElement()}return c}.protect(),setup:function(){this._handler=this._onKeydown.bind(this)},enable:function(){var c=this._getObserver();c.addEvent("keydown",this._handler)},disable:function(){var c=this._getObserver();c.removeEvent("keydown",this._handler)}})}(document,Helper));(function(b,a){a.Swipe=new Class({Extends:a.Delegator,_name:"swipe",_handler:null,setup:function(){var c=this.getObserver();if(!c){this.setObserver(b.body)}this._handler=this._onSwipe.bind(this)},_onSwipe:function(c){if(!this.isEnable()){return}if(!this.hasMethod(c.direction)){return}this.delegate(c.direction)},_getObserver:function(){var d=this.getTarget();var c=this.getObserver();if(d.toElement){c=d.toElement()}return c}.protect(),enable:function(){var c=this._getObserver();c.addEvent("swipe",this._handler)},disable:function(){var c=this._getObserver();c.removeEvent("swipe",this._handler)}})}(document,Helper));(function(b,a){a.Orientation=new Class({Extends:a.Delegator,_name:"orientation",_handler:null,_observer:b,setup:function(){this._handler=this._onOrientationChange.bind(this)},_onOrientationChange:function(e){var d="";var c=b.orientation;if(c==90||c==-90){d="landscape"}else{if(c==0||c==180){d="portrait"}}if(!this.isEnable()){return}if(!this.hasMethod(d)){return}this.delegate(d)},_getObserver:function(){var d=this.getTarget();var c=this.getObserver();if(d.toElement){c=d.toElement()}return c}.protect(),enable:function(){var c=this._getObserver();c.addEvent("orientationchange",this._handler)},disable:function(){var c=this._getObserver();c.removeEvent("orientationchange",this._handler)}})}(window,Helper));